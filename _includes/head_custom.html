<style>
/* site-wide styles for image containers */
.gif-container { max-width: 480px; margin: 0.5rem auto; }
.gif-container img {
  display: block;
  width: 100%;
  height: auto;
  box-sizing: border-box;
  border: 8px solid rgba(56, 165, 255, 0.9); /* light blue */
  border-radius: 12px; /* rounded corners */
  /* images are visible by default (in case JS fails). When JS is available, */
  /* the `js-enabled` class will be added to <html> and hide them until revealed. */
  opacity: 1;
  transform: translateY(0);
  transition: opacity 420ms ease-in, transform 420ms ease-in;
}

/* When JavaScript runs we add `js-enabled` to <html> and hide images until observed */
.js-enabled .gif-container img {
  opacity: 0;
  transform: translateY(8px);
}
.js-enabled .gif-container img.is-visible {
  opacity: 1;
  transform: translateY(0);
}

/* Archive filtering styles */
.archive-item {
  display: block;
  margin: 1rem 0;
}
.archive-item.hidden {
  display: none;
}
</style>

<script>
// Fade images in when they enter the viewport using IntersectionObserver
(function(){
  if (typeof window === 'undefined') return;
  // mark that JS is enabled so CSS can hide images until revealed
  try { document.documentElement.classList.add('js-enabled'); } catch(e){}
  if (!('IntersectionObserver' in window)) return;
  function onIntersect(entries) {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
      }
    });
  }
  const io = new IntersectionObserver(onIntersect, { root: null, rootMargin: '0px 0px -10% 0px', threshold: 0.05 });
  document.addEventListener('DOMContentLoaded', function(){
    document.querySelectorAll('.gif-container img').forEach(img => io.observe(img));
  });
})();

// Archive filtering
(function(){
  if (typeof window === 'undefined') return;
  document.addEventListener('DOMContentLoaded', function(){
    const dropdown = document.getElementById('archive-dropdown');
    if (!dropdown) return;
    dropdown.addEventListener('change', function(){
      const selected = this.value;
      document.querySelectorAll('.archive-item').forEach(item => {
        if (selected === '' || item.dataset.category === selected) {
          item.classList.remove('hidden');
        } else {
          item.classList.add('hidden');
        }
      });
    });
  });
})();
</script>
